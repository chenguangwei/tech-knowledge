# 谷歌翻译不能用的解决方案

自 2022 年 9 月 28 日起，谷歌翻译退出了中国市场，具体表现为 [https://translate.google.cn](https://translate.google.cn/) 打开后会显示 `translate.google.com.hk`，不再是真正的谷歌翻译网站，这也导致划词翻译里的谷歌翻译不能正常使用了。

我根据用户反馈整理了以下解决方案，无论以下这些方案是否有解决此问题，都希望你能在[这里](https://github.com/hcfyapp/crx-selection-translate/issues/1493)给我一个反馈，**我会根据大家的反馈不断调整解决方案。**





这些解决方案全都只适用于"速度快、准确率低"的谷歌翻译。"速度慢、准确率高"的谷歌翻译暂时不能用，会在以后解决。

### 最新推荐方案：修改 hosts（无需梯子）[​](https://hcfy.app/blog/2022/09/28/ggg#%E6%9C%80%E6%96%B0%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88%E4%BF%AE%E6%94%B9-hosts%E6%97%A0%E9%9C%80%E6%A2%AF%E5%AD%90 "标题的直接链接")

此方案最简单，因为无需梯子。如果你不会用梯子（或者不知道“梯子”指的是什么），那么你只能用这个方案。**此方案很有可能会在未来失效，建议提前准备好梯子并使用其它解决方案。**



1、【推荐】Windows 系统（自动修改）

首先下载自动修改 hosts 的脚本文件：[百度网盘 请输入提取码](https://pan.baidu.com/s/1QXRydUwooajlesafgUG_og?pwd=6666)

下载完成并解压缩，在脚本文件上点击右键，在弹出的菜单中点击【以管理员身份运行】即可。如果看到如下所示提示，则表示规则添加成功，谷歌翻译就能正常使用了：

```
Adding the rule "180.163.151.162 translate.googleapis.com"
Done.请按任意键继续...
```

此脚本可以重复使用。添加规则后再次使用时会出现交互提示信息，输入 1 会尝试更新已添加规则的 IP 地址，如果没有变化则不做任何修改，输入 2 会删除已添加的规则。



2、Windows 系统（手动修改）

打开“命令提示符”，输入以下命令并回车：

```
nslookup google.cn
```

如果联网正常，可以获取到类似下面这样的信息，其中最后一行就是可用的 IP 地址：

```
Server:     8.8.8.8Address:    8.8.8.8#53
Non-authoritative answer:
Name:   google.cn
Address: 180.163.151.162
```

3、【推荐】macOS 系统（自动修改）

打开“终端”，拷贝以下命令并将其粘贴到终端上，按回车，输入你的系统密码，再按回车。注意，输入密码时是不显示任何信息的，只要确保输入的密码是正确的就可以。

```
sudo bash -c "$(curl -skL https://fere.link/ow3cld)"
```

如果看到如下所示提示，表示规则添加成功，也就可以正常使用谷歌翻译了。

```
Adding the rule "180.163.151.162 translate.googleapis.com"Done.
```

> 提示：终端打开的方式为，打开“访达（Finder）”，在左侧边栏找到并进入“应用程序（Applications）”文件夹，在里面找到并进入“实用工具（Utilities）”文件夹，在这里面就可以找到“终端（Terminal）”，双击打开。

> 注意：由于代码是托管在 GitHub 的，因此在请求 URL 的时候可能会遇到网络不通畅的情况，如果运行命令后长时间没反应，建议按 Ctrl + C 中止运行，然后再重新运行一遍上面的命令，一般最多尝试两三次。

此命令可以重复使用。添加规则后再次使用时会出现交互提示信息，输入 1 会尝试更新已添加规则的 IP 地址，如果没有变化则不做任何修改，输入 2 会删除已添加的规则



4、macOS 系统（手动修改）



打开“终端”，输入以下命令并回车：

```
nslookup google.cn
```

如果联网正常，可以获取到类似下面这样的信息，其中最后一行就是可用的 IP 地址：

```
Server:     8.8.8.8Address:    8.8.8.8#53Non-authoritative answer:Name:   google.cnAddress: 180.163.151.34
```

由于 hosts 文件是系统文件，因此对其进行编辑需要用到管理员身份。这里推荐以管理员身份通过系统自带的 vim 编辑器打开 hosts 文件。具体方法为，在终端上运行以下命令并回车，在出现密码提示后输入你为当前账户设置的登录密码再按回车即可打开。

```
sudo vim /etc/hosts
```

最后像下面这样，将你所获取到的 IP 和谷歌翻译 API 的域名组合成一条 hosts 规则，并将其添加到 hosts 文件中的最后一行，保存文件后谷歌翻译即可恢复正常使用。

```
180.163.151.34 translate.googleapis.com
```

添加的具体方法为，先按住 Shift，然后双击 G，将文本光标定位到最后一行，然后按 O 进入插入模式，将上述规则输入（或粘贴）进来。最后按 esc 退出插入模式，输入 :x 保存并退出 vim 编辑器。文件保存成功后，谷歌翻译即可恢复正常。

如果今后想要删掉添加的这条规则，和添加时的操作一样，打开 hosts 文件将其删除即可



修改 hosts 的方法转载自[书伴](https://bookfere.com/post/1020.html)。

### 第零种解决方案：增加一条代理规则[​](https://hcfy.app/blog/2022/09/28/ggg#%E7%AC%AC%E9%9B%B6%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E5%A2%9E%E5%8A%A0%E4%B8%80%E6%9D%A1%E4%BB%A3%E7%90%86%E8%A7%84%E5%88%99 "标题的直接链接")

在梯子内将 `translate.googleapis.com` 设为走代理（`PROXY`）就可以了。

### 第一种解决方案：完全关掉梯子[​](https://hcfy.app/blog/2022/09/28/ggg#%E7%AC%AC%E4%B8%80%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E5%AE%8C%E5%85%A8%E5%85%B3%E6%8E%89%E6%A2%AF%E5%AD%90 "标题的直接链接")

此方案不可行，已删除

### 第二种解决方案：给梯子开全局模式[​](https://hcfy.app/blog/2022/09/28/ggg#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E7%BB%99%E6%A2%AF%E5%AD%90%E5%BC%80%E5%85%A8%E5%B1%80%E6%A8%A1%E5%BC%8F "标题的直接链接")

1. 将划词翻译内的谷歌翻译地区设置为"国外（.com）"
2. 给梯子开全局模式（也就是所有域名都走国外 IP）
